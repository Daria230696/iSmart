var formLogin=document.querySelector("#formLogin"),validateBtnLogin=formLogin.querySelector(".btn_form"),formReg=document.querySelector("#formReg"),validateBtnReg=formReg.querySelector(".btn_form");function $_GET(e,t){return!!(t=t.match(new RegExp(e+"=([^&=]+)")))&&t[1]}function loadPage(){var e=$_GET("stag",window.location.href);if(e){const t=new XMLHttpRequest;e='{"stag":"'+e+'"}';t.open("POST","https://affiliates.enchantaffiliates.com/api/client/partner/track_stag",!1),t.withCredentials=!0,t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Content-type","application/json"),t.send(e),204!=t.status?alert("Error - "+t.status+": "+t.statusText+" - Answer: "+t.responseText):(console.log("Stag Ok - "+t.status),location="https://enchantaffiliates.com/")}}formReg.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(formReg);var n=t.get("email"),r=t.get("password1"),o=t.get("password2"),a=t.get("company"),s=t.get("skype"),i=t.get("telegram"),c=t.get("letters"),e=t.get("terms"),c=!!c;if(e=!!e)if(r==o){const p=new XMLHttpRequest;var l,o='{"partner_user":{"company_name":"'+a+'","email":"'+n+'","password":"'+r+'","password_confirmation":"'+o+'","terms_accepted":'+e+',"skype":"'+s+'","receive_newsletter":'+c+',"telegram":"'+i+'"}}';p.open("POST","https://affiliates.enchantaffiliates.com/api/client/partner",!1),p.withCredentials=!0,p.setRequestHeader("Accept","application/json"),p.setRequestHeader("Content-type","application/json"),p.send(o),201!=p.status?(e=p.response,e=JSON.parse(e),s=document.getElementById("textEmailError"),l=document.getElementById("textPasswordError"),c=document.getElementById("textCompanyError"),i=document.getElementById("textSkypeError"),o=document.getElementById("textTelegramError"),s.textContent=e.errors.email,l.textContent=e.errors.password,c.textContent=e.errors.company_name,i.textContent=e.errors.skype,o.textContent=e.errors.telegram):(alert("Registration successful!"),location="https://enchantaffiliates.com/")}else(l=document.getElementById("textPasswordError")).textContent="The entered passwords do not match!";else alert("You must accept Terms and Conditions!")}),formLogin.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(formLogin);var n=t.get("email"),r=t.get("password"),e=t.get("code");const o=new XMLHttpRequest;n='{"partner_user":{"email":"'+n+'","password":"'+r+'","otp_attempt":"'+e+'"}}';o.open("POST","https://affiliates.enchantaffiliates.com/api/client/partner/sign_in",!1),o.withCredentials=!0,o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Content-type","application/json"),o.send(n),201!=o.status?(r=o.response,r=JSON.parse(r),e=document.getElementById("showError"),n=document.getElementById("textError"),e.style.display="block",n.textContent=r.error):(console.log("Login Ok - "+o.status),location="https://affiliates.enchantaffiliates.com/partner/dashboard")});